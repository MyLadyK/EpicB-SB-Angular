<div class="user-profile-background" style="min-height: 100vh; background: linear-gradient(135deg, #2C3E50, #4CA1AF); display: flex; align-items: center; justify-content: center; position: relative; overflow: hidden;">
  <div class="profile-overlay" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.3); z-index: 1;"></div>
  
  <div class="profile-container" style="width: 100%; max-width: 800px; background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); border-radius: 20px; padding: 40px; box-shadow: 0 15px 35px rgba(0,0,0,0.2); z-index: 2; position: relative; border: 1px solid rgba(255,255,255,0.2);">
    <div class="text-center mb-4">
      <h1 style="color: #00FF7F; font-size: 2.5rem; text-shadow: 0 0 10px rgba(0,255,127,0.5);">Perfil de Héroe</h1>
      <p style="color: #FF69B4; opacity: 0.8;">Tu identidad en Epic Battle</p>
    </div>
    
    <div class="row">
      <div class="col-md-4 text-center">
        <div class="avatar-container" style="position: relative; display: inline-block;">
          <img 
            [src]="user.imageUrl" 
            class="img-fluid rounded-circle" 
            style="max-width: 250px; border: 4px solid #00FF7F; box-shadow: 0 0 20px rgba(0,255,127,0.5);"
          >
          <div 
            class="avatar-overlay" 
            style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.3); border-radius: 50%; opacity: 0; transition: opacity 0.3s;"
          ></div>
        </div>
        <h2 style="color: white; margin-top: 20px; text-shadow: 0 0 10px rgba(255,105,180,0.5);">{{ user.nameUser }}</h2>
        <p style="color: #FF69B4; opacity: 0.8;">{{ user.mailUser }}</p>
        <div class="mt-2">
          <span class="badge bg-success" style="background-color: #00FF7F !important; color: black;">
            Puntos: {{ user.pointsUser }}
          </span>
        </div>
      </div>
      
      <div class="col-md-8">
        <div class="profile-details" style="background: rgba(255,255,255,0.1); border-radius: 15px; padding: 30px; box-shadow: 0 10px 20px rgba(0,0,0,0.2);">
          <h3 style="color: #00FF7F; margin-bottom: 20px; border-bottom: 2px solid #FF69B4; padding-bottom: 10px;">Detalles del Héroe</h3>
          
          <div class="row mb-3">
            <div class="col-4" style="color: #FF69B4; font-weight: bold;">Nombre</div>
            <div class="col-8" style="color: white;">{{ user.nameUser }}</div>
          </div>
          
          <div class="row mb-3">
            <div class="col-4" style="color: #FF69B4; font-weight: bold;">Correo</div>
            <div class="col-8" style="color: white;">{{ user.mailUser }}</div>
          </div>
          
          <div class="row mb-3">
            <div class="col-4" style="color: #FF69B4; font-weight: bold;">Fecha de Registro</div>
            <div class="col-8" style="color: white;">{{ user.registrationDate | date:'dd/MM/yyyy' }}</div>
          </div>
          
          <div class="text-center mt-4">
            <button 
              class="btn" 
              style="background-color: #00FF7F; color: black; font-weight: bold; border: none; padding: 10px 30px; border-radius: 25px; transition: all 0.3s; box-shadow: 0 10px 20px rgba(0,255,127,0.4);"
              onmouseover="this.style.transform='scale(1.05)'"
              onmouseout="this.style.transform='scale(1.0)'"
            >
              Editar Perfil
            </button>
          </div>
        </div>
      </div>
    </div>
    
    <div class="card mb-4 mt-4">
      <div class="card-header" style="background-color: #FF69B4; color: white;">
        Mi Tropa ({{ userCollection.length }}/8)
      </div>
      <div class="card-body">
        <div *ngIf="userCollection.length === 0" class="alert alert-info">No tienes personajes en tu tropa.</div>
        <div class="row">
          <div class="character-card" *ngFor="let uc of userCollection">
            <div class="character-info">
              <img [src]="uc.imageUrlUserCharacter" [alt]="uc.baseCharacter.nameCharacter" class="rounded-circle mr-3" style="width: 80px; height: 80px; object-fit: cover;">
              <div class="character-details">
                <div class="base-character-info" style="border-bottom: 1px solid rgba(255,105,180,0.3); padding-bottom: 8px; margin-bottom: 8px;">
                  <h6 style="color: #FF69B4; margin-bottom: 4px;">{{ uc.baseCharacter.nameCharacter }}</h6>
                  <p class="text-muted mb-1" style="font-size: 0.9em;">{{ uc.baseCharacter.categoryCharacter }} | {{ uc.baseCharacter.universeCharacter }}</p>
                </div>
                <div class="user-character-stats">
                  <small class="text-muted d-block mb-2">
                    <span class="stat-label">Salud:</span> <span class="stat-value">{{ uc.healthUserCharacter }}</span> | 
                    <span class="stat-label">Ataque:</span> <span class="stat-value">{{ uc.attackUserCharacter }}</span> | 
                    <span class="stat-label">Defensa:</span> <span class="stat-value">{{ uc.defenseUserCharacter }}</span> |
                    <span class="stat-label">Velocidad:</span> <span class="stat-value">{{ uc.speedUserCharacter }}</span>
                  </small>
                  <p class="text-muted mt-1 mb-0" style="font-size: 0.9em;">Nivel de experiencia: {{ uc.timesUsed }}</p>
                </div>
              </div>
            </div>
            <div class="character-actions">
              <button class="btn btn-sm btn-danger" (click)="removeFromCollection(uc.baseCharacter)">Eliminar</button>
            </div>
          </div>

          <div class="mt-3">
            <div class="input-group">
              <select class="form-select" [(ngModel)]="selectedCharacterId">
                <option [ngValue]="null">Selecciona un personaje para añadir</option>
                <option *ngFor="let char of allCharacters" [ngValue]="char.idCharacter" [disabled]="isInCollection(char)">
                  {{ char.nameCharacter }} ({{ char.categoryCharacter }})
                </option>
              </select>
              <button 
                class="btn btn-success" 
                [disabled]="!selectedCharacterId || !canAddToCollection()" 
                (click)="addToCollectionById()"
                style="background-color: #00FF7F; border-color: #00FF7F; color: black;"
              >
                Añadir
              </button>
            </div>
            <div *ngIf="feedbackMsg" class="alert alert-info mt-2">{{ feedbackMsg }}</div>
          </div>
        </div>
      </div>

      <!-- Sección de Batallas -->
      <div class="card mt-4">
        <div class="card-header" style="background-color: #FF69B4; color: white;">
          Historial de Batallas
        </div>
        <div class="card-body">
          <app-user-profile-battles *ngIf="user?.idUser" [userId]="user.idUser"></app-user-profile-battles>
        </div>
      </div>

    </div>
  </div>
</div>
